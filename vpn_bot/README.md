# VPN Bot (@agdevpnbot)

Telegram Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ WireGuard VPN ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¾Ðº.

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

### Ð”Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹:
- ðŸŽ ÐŸÑ€Ð¾Ð±Ð½Ñ‹Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´ 7 Ð´Ð½ÐµÐ¹ (Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·)
- ðŸ’³ ÐžÐ¿Ð»Ð°Ñ‚Ð° Ñ‚Ð°Ñ€Ð¸Ñ„Ð¾Ð² Ñ‡ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ñƒ
- ðŸ“± ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ð¸ QR-ÐºÐ¾Ð´Ð¾Ð²
- ðŸ“Š ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸
- âž• Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð²

### Ð”Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°:
- ðŸ‘¥ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸
- ðŸ’° ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹ Ñ OCR Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸ÐµÐ¼ Ñ‡ÐµÐºÐ¾Ð²
- ðŸŽ Ð’Ñ‹Ð´Ð°Ñ‡Ð° Ð±ÐµÑÑÑ€Ð¾Ñ‡Ð½Ñ‹Ñ… Ñ‚Ð°Ñ€Ð¸Ñ„Ð¾Ð²
- âž• Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼
- ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ°
- âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±Ð¾Ñ‚Ð°:
  - ðŸ”‘ ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð±Ð¾Ñ‚Ñƒ
  - ðŸ“¢ ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° ÐºÐ°Ð½Ð°Ð»
  - ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸

## Ð¢Ð°Ñ€Ð¸Ñ„Ñ‹

| Ð¢Ð°Ñ€Ð¸Ñ„ | Ð”Ð½ÐµÐ¹ | Ð¦ÐµÐ½Ð° |
|-------|------|------|
| ÐŸÑ€Ð¾Ð±Ð½Ñ‹Ð¹ | 7 | Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ |
| 1 Ð¼ÐµÑÑÑ† | 30 | 100â‚½ |
| 3 Ð¼ÐµÑÑÑ†Ð° | 90 | 200â‚½ |
| 6 Ð¼ÐµÑÑÑ†ÐµÐ² | 180 | 300â‚½ |
| Ð‘ÐµÑÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¹ | âˆž | ÐŸÐ¾Ð´Ð°Ñ€Ð¾Ñ‡Ð½Ñ‹Ð¹ |

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

```bash
cd vpn_bot
pip install -r requirements.txt
```

### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Tesseract OCR (Ð´Ð»Ñ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ñ Ñ‡ÐµÐºÐ¾Ð²)

**Ubuntu/Debian:**
```bash
sudo apt install tesseract-ocr tesseract-ocr-rus
```

**macOS:**
```bash
brew install tesseract tesseract-lang
```

### 3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» .env

```bash
cp .env.example .env
```

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `.env`:
```env
BOT_TOKEN=your_bot_token_here
ADMIN_ID=your_telegram_id
PAYMENT_PHONE=your_payment_phone
LOCAL_MODE=true  # false Ð´Ð»Ñ production
```

### 4. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð±Ð¾Ñ‚Ð°

```bash
python bot.py
```

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±Ð¾Ñ‚Ð°

### ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ:
- `/start` â€” Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ

### ÐÐ´Ð¼Ð¸Ð½ÑÐºÐ¸Ðµ:
- `/admin` â€” ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ
- `/gift @username` â€” Ð’Ñ‹Ð´Ð°Ñ‚ÑŒ Ð±ÐµÑÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¹ Ñ‚Ð°Ñ€Ð¸Ñ„

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
vpn_bot/
â”œâ”€â”€ bot.py              # Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
â”œâ”€â”€ config.py           # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
â”œâ”€â”€ database/           # ÐœÐ¾Ð´ÐµÐ»Ð¸ Ð¸ Ð‘Ð”
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ models.py
â”œâ”€â”€ handlers/           # ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÐºÐ¾Ð¼Ð°Ð½Ð´
â”‚   â”œâ”€â”€ admin.py        # ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ
â”‚   â””â”€â”€ user.py         # ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
â”œâ”€â”€ keyboards/          # ÐšÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹
â”‚   â”œâ”€â”€ admin_kb.py
â”‚   â””â”€â”€ user_kb.py
â”œâ”€â”€ services/           # Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹
â”‚   â”œâ”€â”€ monitoring.py   # ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸
â”‚   â”œâ”€â”€ ocr.py          # OCR Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ Ñ‡ÐµÐºÐ¾Ð²
â”‚   â”œâ”€â”€ scheduler.py    # ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð´Ð°Ñ‡
â”‚   â”œâ”€â”€ settings.py     # Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸
â”‚   â””â”€â”€ wireguard.py    # Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ WireGuard
â””â”€â”€ states/             # FSM ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ
    â””â”€â”€ user_states.py
```

## Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

### 1. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

```bash
scp -r vpn_bot root@YOUR_SERVER_IP:/root/
```

### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

```bash
ssh root@YOUR_SERVER_IP
cd /root/vpn_bot
pip3 install -r requirements.txt
apt install tesseract-ocr tesseract-ocr-rus -y
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ .env

```bash
nano .env
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ LOCAL_MODE=false
```

### 4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ systemd ÑÐµÑ€Ð²Ð¸Ñ

```bash
cat > /etc/systemd/system/vpn-bot.service << 'EOF'
[Unit]
Description=VPN Telegram Bot
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/vpn_bot
ExecStart=/usr/bin/python3 /root/vpn_bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF
```

### 5. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸Ñ

```bash
systemctl daemon-reload
systemctl enable vpn-bot
systemctl start vpn-bot
systemctl status vpn-bot
```

### 6. ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²

```bash
journalctl -u vpn-bot -f
```

## Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

ÐŸÑ€Ð¸ `LOCAL_MODE=true`:
- ÐšÐ¾Ð½Ñ„Ð¸Ð³Ð¸ Ð½Ðµ ÑÐ¾Ð·Ð´Ð°ÑŽÑ‚ÑÑ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾
- WireGuard ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ
- ÐœÐ¾Ð¶Ð½Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð±Ð¾Ñ‚Ð° Ð±ÐµÐ· ÑÐµÑ€Ð²ÐµÑ€Ð°
