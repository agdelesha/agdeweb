# VPN Bot - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

## –ü—Ä–æ–µ–∫—Ç
Telegram –±–æ—Ç –¥–ª—è WireGuard VPN: `@agdevpnbot`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ü—É—Ç—å**: `/Users/agdelesha/Desktop/myScripts/wgScript/vpn_bot/`
- **–°–µ—Ä–≤–µ—Ä**: `root@83.217.9.75:/root/vpn_bot/`
- **–°–µ—Ä–≤–∏—Å**: `systemctl restart vpn-bot`

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.8, aiogram 3.x
- SQLAlchemy async (SQLite)
- WireGuard VPN

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `handlers/user.py` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `handlers/admin.py` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `services/wireguard.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WireGuard
- `services/settings.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

## –î–µ–ø–ª–æ–π
```bash
scp vpn_bot/handlers/admin.py root@83.217.9.75:/root/vpn_bot/handlers/
ssh root@83.217.9.75 "systemctl restart vpn-bot"
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Markdown –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –ò–º–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è (`agdelesha_2`)
- –≠—Ç–æ –ª–æ–º–∞–µ—Ç Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `parse_mode=None` –≥–¥–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–º–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –ü—Ä–∏–º–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `admin_user_detail` (—Å—Ç—Ä–æ–∫–∞ ~160)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ–ø. –∫–æ–Ω—Ñ–∏–≥ ‚Üí –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ê–¥–º–∏–Ω –æ–¥–æ–±—Ä—è–µ—Ç ‚Üí –∫–æ–Ω—Ñ–∏–≥ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –∏–º–µ–Ω–µ–º `username + device`
- –ö–æ–¥ –≤ `admin.py` —Ñ—É–Ω–∫—Ü–∏—è `admin_approve_config_request`
- –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è regex –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω—É

### –ú–∏–≥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Telegram –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è `callback.answer()` —Å–ª–æ–º–∞–ª–∞ –±–æ—Ç–∞
- `CallbackQuery` –≤ aiogram 3.x –Ω–µ –∏–º–µ–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ `answered`
- –û—Å—Ç–∞–≤–∏–ª–∏ –∫–∞–∫ –µ—Å—Ç—å - —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (30.12.2024)
1. **OCR –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** ‚Äî —Ç–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Å—É–º–º—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ –ë–î (—Å —É—á—ë—Ç–æ–º —Å–∫–∏–¥–æ–∫ 50%)
2. **–í—Ä–µ–º—è –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ (UTC+3)** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `format_datetime_moscow()` –∏ `format_date_moscow()` –≤ `utils.py`
3. **–ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞** ‚Äî –≤ –∞–¥–º–∏–Ω–∫–µ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∑–∞–≤–∏—Å—à–∏–π –ø–ª–∞—Ç—ë–∂ (üóë –£–¥–∞–ª–∏—Ç—å –ø–ª–∞—Ç—ë–∂)
4. –¢–∞—Ä–∏—Ñ—ã: –∏–∑–º–µ–Ω—ë–Ω —Ç–µ–∫—Å—Ç –Ω–∞ "30/90/180 –¥–Ω–µ–π" –≤–º–µ—Å—Ç–æ "–º–µ—Å—è—Ü–µ–≤"
5. –£–±—Ä–∞–Ω Markdown –∏–∑ `admin_user_detail` (parse_mode=None)
6. –ö–æ–Ω—Ñ–∏–≥–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `username + device` (–±–µ–∑ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏)

## GitHub
https://github.com/agdelesha/agdevpnbot
